var M=(e,l,n)=>new Promise((m,s)=>{var d=t=>{try{a(n.next(t))}catch(i){s(i)}},u=t=>{try{a(n.throw(t))}catch(i){s(i)}},a=t=>t.done?m(t.value):Promise.resolve(t.value).then(d,u);a((n=n.apply(e,l)).next())});import{B as R,u as L}from"./useTable.656d2bae.js";import{x as N}from"./BasicForm.6056307a.js";import{aG as I,a as k,d1 as w,aI as p,o as A,h as C,j as c,p as E,t as O,aK as y,q as D,x as v}from"./index.9e465e98.js";import{T as f}from"./table.0ba2e59f.js";import{b as B}from"./index.7ea231b7.js";import x from"./Modify.6e554cc2.js";import g from"./CreateMenu.6a8c2cf4.js";import{g as S,b as $}from"./common.6cef50b2.js";import"./index.7cdee0ed.js";import"./useForm.7c9a0ef0.js";import"./index.967f417a.js";import"./index.d342c0df.js";import"./index.82faa0b7.js";import"./index.af33b015.js";import"./useWindowSizeFn.14b10c39.js";import"./useContentViewHeight.c6c711f4.js";import"./ArrowLeftOutlined.8cc9af78.js";import"./transButton.088152fa.js";import"./index.7e01442e.js";import"./index.1396ba67.js";import"./index.17dc3642.js";import"./_baseIteratee.2f88fd8b.js";import"./index.892b83b2.js";import"./sortable.esm.c20789c1.js";import"./RedoOutlined.e5187225.js";import"./FullscreenOutlined.0624c6a3.js";import"./scrollTo.e1b29360.js";import"./index.d11f5ba1.js";import"./index.caea034d.js";import"./index.a9758a55.js";import"./index.9dc129cb.js";import"./index.8f156bb7.js";import"./uniqBy.b001b07b.js";import"./download.8926825a.js";import"./index.2c96af2d.js";import"./index.9f075c29.js";import"./index.fcb96485.js";import"./tableData.d8d93b16.js";const W=[{title:"\u8868\u540D",dataIndex:"TABLE_NAME",sorter:!0},{title:"\u8BB0\u5F55\u6570",dataIndex:"TABLE_ROWS",sorter:!0},{title:"\u5907\u6CE8",dataIndex:"TABLE_COMMENT",sorter:!0},{title:"\u5F15\u64CE",dataIndex:"ENGINE",sorter:!0},{title:"\u5B57\u7B26\u96C6",sorter:!0,dataIndex:"TABLE_COLLATION"},{title:"\u521B\u5EFA\u65F6\u95F4",sorter:!0,dataIndex:"CREATE_TIME"}],G=k({components:{Modal:x,BasicTable:R,TableAction:N,ModalCreateMenu:g},setup(){const[e,{openModal:l}]=B(),[n,{openModal:m}]=B(),{createMessage:s}=v(),{success:d}=s,u=w(),[a,{reload:t}]=L({title:"\u6240\u6709\u8868",api:S(f.SHOW),columns:W,bordered:!0,actionColumn:{width:250,title:"Action",dataIndex:"action",slots:{customRender:"action"}}});function i(){l(!0,{table:""})}function T(){t()}function r(o){l(!0,{table:o.TABLE_NAME})}function b(o){return M(this,null,function*(){yield $(f.DROP,{table:o.TABLE_NAME}),d("\u5220\u9664\u6210\u529F"),t()})}function _(o){return M(this,null,function*(){m(!0,{table:o.TABLE_NAME})})}function h(o){console.log("\u70B9\u51FB\u4E86\u542F\u7528",o)}function F(o){u(`/database/table/view/${o}`)}return{registerTable:a,handleEdit:r,handleDelete:b,handleOpen:h,view:F,openTableModal:i,register:e,createMenuRegister:n,reloadTables:T,handleCreateMenu:_,ModalCreateMenu:g}}}),H={class:"p-4"},V=D(" \u521B\u5EFA\u8868\u683C "),P=["onClick"];function j(e,l,n,m,s,d){const u=p("a-button"),a=p("TableAction"),t=p("BasicTable"),i=p("Modal"),T=p("ModalCreateMenu");return A(),C("div",H,[c(t,{onRegister:e.registerTable,showTableSetting:""},{toolbar:E(()=>[c(u,{type:"primary",onClick:e.openTableModal},{default:E(()=>[V]),_:1},8,["onClick"])]),bodyCell:E(({column:r,record:b})=>[r.key==="TABLE_ROWS"?(A(),C("a",{key:0,onClick:_=>e.view(b.TABLE_NAME)},O(b.TABLE_ROWS),9,P)):y("",!0)]),action:E(({record:r})=>[c(a,{actions:[{label:"\u7F16\u8F91",onClick:e.handleEdit.bind(null,r)},{label:"\u5220\u9664",icon:"ic:outline-delete-outline",popConfirm:{title:"\u662F\u5426\u5220\u9664\uFF1F",confirm:e.handleDelete.bind(null,r)}}],dropDownActions:[{label:"\u4E00\u952E\u83DC\u5355",onClick:e.handleCreateMenu.bind(null,r)}]},null,8,["actions","dropDownActions"])]),_:1},8,["onRegister"]),c(i,{onRegister:e.register,defaultFullscreen:!0,minHeight:100,onReload:e.reloadTables},null,8,["onRegister","onReload"]),c(T,{onRegister:e.createMenuRegister,minHeight:300},null,8,["onRegister"])])}var ke=I(G,[["render",j]]);export{ke as default};
